<div class="chat-input-container">
  <form (ngSubmit)="submitMessage(messageForm)" #messageForm="ngForm">
    <textarea
      id="message-field"
      [(ngModel)]="message.message"
      name="message"
      id=""
      rows="2"
      placeholder="Nachricht an ..."
      (keydown.enter)="onEnterKeyPressed($event, messageForm)"
      minlength="1"
      [disabled]="onNewMsgBoard"
    ></textarea>

    <!-- Uploaded file -->
    <div class="uploaded-files">
      @if(this.fileUploadService.uploadedFiles[0] && textfieldOnUploadChannel ==
      true) {
      <!-- <div *ngFor="let uploadedFile of uploadedFiles; let i = index"> -->
      <div class="file">
        <!-- <span>{{ uploadedFile.file.name }}</span> -->
        <a
          href="{{ this.fileUploadService.uploadedFiles[0].downloadURL }}"
          target="_blank"
          >{{ this.fileUploadService.uploadedFiles[0].file.name }}</a
        >

        <div (click)="deleteFile()" class="delete-icon"></div>
      </div>
      } @else if(this.fileUploadService.uploadedFiles[0] &&
      textfieldOnUploadThread == true) {
      <div class="file">
        <a
          href="{{ this.fileUploadService.uploadedFiles[0].downloadURL }}"
          target="_blank"
          >{{ this.fileUploadService.uploadedFiles[0].file.name }}</a
        >
        <span (click)="deleteFile()" class="delete-icon"></span>
      </div>
      } @else if(this.fileUploadService.uploadedFiles[0] &&
      textfieldOnUploadChat == true) {
      <div class="file">
        <a
          href="{{ this.fileUploadService.uploadedFiles[0].downloadURL }}"
          target="_blank"
          >{{ this.fileUploadService.uploadedFiles[0].file.name }}</a
        >
        <span (click)="deleteFile()" class="delete-icon"></span>
      </div>
      }
    </div>

    <!-- Icons on the bottom -->
    <div class="chat-icons-container">
      <div class="reaction-icons" id="reaction-icons-wrapper">
        <div
          [style.pointer-events]="onNewMsgBoard ? 'none' : 'auto'"
          class="reaction-icon-plus"
          (click)="
            this.fileUploadService.chooseFile(); setTextfieldStatus(true)
          "
        ></div>
        <div class="sep-line"></div>
        <div
          class="reaction-icon-emoji"
          [style.pointer-events]="onNewMsgBoard ? 'none' : 'auto'"
          [matMenuTriggerFor]="aboveMenu"
        ></div>
        <mat-menu #aboveMenu="matMenu" yPosition="above" xPosition="before">
          <emoji-mart
            (emojiClick)="addEmoji($event)"
            emoji="point_up"
            [enableSearch]="false"
          ></emoji-mart>
        </mat-menu>
        <div
          [style.pointer-events]="onNewMsgBoard ? 'none' : 'auto'"
          class="reaction-icon-at"
        ></div>
      </div>
      <input
        class="icon-send"
        type="submit"
        value=""
        [disabled]="onNewMsgBoard"
      />
    </div>
  </form>
</div>
